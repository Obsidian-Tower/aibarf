<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>aibarf | Home</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #0a0a0a;
        --fg: #cccccc;
        --accent: rgb(56, 136, 255);
        --accent-glow: rgba(56, 136, 255, 0.7);
        --purple: hsl(0, 100%, 50%);
        --radius: 0.5rem;
        /* grid colors */
        --card-bg: #1a1a1a;
        --muted: #aaa;
        --overlay: rgba(0,0,0,0.7);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        background: var(--bg);
        color: var(--fg);
        font-family: "Poppins", sans-serif;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 2rem;
      }

      nav a.logo {
        display: flex;
        align-items: center;
      }

      #nav-right {
        display: flex;
        align-items: center;
      }

      button.btn-login,
      button#logout-btn {
        margin-left: 1rem;
        padding: 0.5rem 1rem;
        border: none;
        border-radius: var(--radius);
        background: none;
        cursor: pointer;
        font-weight: 500;
        font-size: 1rem;
        color: var(--accent);
        box-shadow: 0 0 2px 2px var(--accent-glow);
        transition: box-shadow 0.3s ease;
      }
      button.btn-login:hover,
      button#logout-btn:hover {
        box-shadow: 0 0 60px 4px var(--accent-glow);
      }

      @keyframes hueShift {
        0% { color: hsl(0,100%,50%); }
        14% { color: hsl(30,100%,50%); }
        28% { color: hsl(60,100%,50%); }
        43% { color: hsl(120,100%,50%); }
        57% { color: hsl(240,100%,50%); }
        71% { color: hsl(275,100%,50%); }
        86% { color: hsl(300,100%,50%); }
        100% { color: hsl(360,100%,50%); }
      }
      button.btn-signup {
        margin-left: 1rem;
        padding: 0.5rem 1rem;
        border: none;
        border-radius: var(--radius);
        background: none;
        cursor: pointer;
        font-weight: 500;
        font-size: 1rem;
        color: var(--purple);
        animation: hueShift 25s linear infinite;
        box-shadow: 0 0 2px 2px currentColor;
        transition: box-shadow 0.3s ease;
      }
      button.btn-signup:hover {
        box-shadow: 0 0 60px 4px currentColor;
      }

      #hero {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* —— GRID & CARDS —— */
      .container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 1rem;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 1.5rem;
      }
      .card {
        position: relative;
        display: block;
        width: 100%;
        aspect-ratio: 1/1;
        overflow: hidden;
        border-radius: var(--radius);
        background: var(--card-bg);
        text-decoration: none;
        color: inherit;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 30px rgba(0,0,0,0.4);
      }
      .thumbnail {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }
      .overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        padding: 0.75rem 1rem;
        background: var(--overlay);
        transform: translateY(100%);
        transition: transform 0.3s ease;
      }
      .card:hover .overlay {
        transform: translateY(0);
      }
      .overlay h2 {
        font-size: 1rem;
        font-weight: 600;
        margin: 0;
      }
      .card-stats {
        margin-top: 0.25rem;
        font-size: 0.75rem;
        color: var(--muted);
      }

      footer {
        text-align: center;
        padding: 1rem;
        font-size: 0.8rem;
        color: #777;
      }
      footer a.z532 {
        color: #00ff84;
        text-decoration: none;
        font-weight: 500;
        margin-left: 0.25rem;
      }
      /* —— end grid styles —— */
    </style>
  </head>

  <body>
    <nav>
      <a href="index.html" class="logo">
        <img src="/images/aibarf-logo-1.jpeg" alt="aibarf Logo" height="32" />
      </a>
      <div id="nav-right"></div>
    </nav>

    <section id="hero">
      <!-- your existing hero content -->
    </section>

    <!-- —— Level 1–5 Sets Grid —— -->
    <main class="container grid">
      <!-- Example card; duplicate or generate via JS -->
      <a href="view-set.html?setId=123" class="card">
        <img
          class="thumbnail"
          src="/images/example-thumb.jpg"
          alt="Sunset Landscapes"
        />
        <div class="overlay">
          <h2>Sunset Landscapes</h2>
          <div class="card-stats">
            <span>12 Images</span>
          </div>
        </div>
      </a>
      <a href="view-set.html?setId=456" class="card">
        <img
          class="thumbnail"
          src="/images/example-thumb2.jpg"
          alt="Abstract Shapes"
        />
        <div class="overlay">
          <h2>Abstract Shapes</h2>
          <div class="card-stats">
            <span>8 Images</span>
          </div>
        </div>
      </a>
      <!-- …more cards… -->
    </main>

    <footer>
      &copy; 2025 aibarf. All images synthetic. All minds welcome.
      <a href="https://z532.ai" class="z532">A Z532 product.</a>
    </footer>

    <script>
      const API = "https://aibarf-auth.coryzuber.workers.dev";
      const navRight = document.getElementById("nav-right");

      function renderGuest() {
        navRight.innerHTML = `
          <button class="btn-login" onclick="location.href='login.html'">
            Log In
          </button>
          <button class="btn-signup" onclick="location.href='signup.html'">
            Sign Up
          </button>
        `;
      }

      fetch(`${API}/me`, {
        credentials: "include",
        mode: "cors",
      })
        .then((res) => res.json())
        .then((data) => {
          if (data.user) {
            navRight.innerHTML = `
              <button class="btn-add" data-tooltip="Create Set"
                      onclick="location.href='create-image-set.html'">
                ＋
              </button>
              <span>Hello, ${data.user.name}</span>
              <button id="logout-btn">Log Out</button>
            `;
            document
              .getElementById("logout-btn")
              .addEventListener("click", () => {
                fetch(`${API}/logout`, {
                  method: "POST",
                  credentials: "include",
                  mode: "cors",
                }).then(() => location.reload());
              });
          } else {
            renderGuest();
          }
        })
        .catch(renderGuest);
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>aibarf | View Set</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #0a0a0a;
        --fg: #cccccc;
        --accent: rgb(56, 136, 255);
        --accent-glow: rgba(56, 136, 255, 0.7);
        --radius: 0.5rem;
        --card-bg: #1a1a1a;
        --muted: #aaa;
        --overlay: rgba(0, 0, 0, 0.7);
        --columns: 6;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        background: var(--bg);
        color: var(--fg);
        font-family: "Poppins", sans-serif;
        padding-top: 80px;
      }

      nav {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 80px;
        padding: 1rem 2rem;
        background: rgba(10, 10, 10, 0.9);
        backdrop-filter: blur(8px);
        display: flex;
        justify-content: space-between;
        align-items: center;
        z-index: 1000;
      }

      nav a.logo {
        display: flex;
        align-items: center;
      }

      #nav-controls {
        display: flex;
        gap: 0.5rem;
      }

      .btn-add {
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 50%;
        border: 2px solid var(--accent);
        background: none;
        color: var(--accent);
        cursor: pointer;
        font-size: 1.5rem;
        position: relative;
        transition: box-shadow 0.2s ease, transform 0.2s ease;
      }

      .btn-add:hover {
        box-shadow: 0 0 8px 4px var(--accent-glow);
        transform: scale(1.1);
      }

      .container {
        padding: 1rem;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(var(--columns), 1fr);
        gap: 2px;
      }

      .grid img {
        width: 100%;
        aspect-ratio: 1/1;
        object-fit: cover;
        border-radius: var(--radius);
        cursor: pointer;
        transition: transform 0.2s ease;
      }

      .grid img:hover {
        transform: scale(1.05);
      }

      #status {
        text-align: center;
        color: var(--muted);
        margin: 2rem 0;
      }

      footer {
        text-align: center;
        padding: 1rem;
        font-size: 0.8rem;
        color: #777;
      }

      footer a.z532 {
        color: #00ff84;
        text-decoration: none;
        font-weight: 500;
      }
    </style>
  </head>
  <body>
    <nav>
      <a href="index.html" class="logo">
        <img src="/images/aibarf-logo-1.jpeg" alt="aibarf Logo" height="32" />
      </a>

      <div id="nav-controls">
        <button id="decrease-btn" class="btn-add">−</button>
        <button id="increase-btn" class="btn-add">＋</button>
      </div>
    </nav>

    <main class="container">
      <div id="status">Loading set…</div>
      <div id="set-view" style="display: none">
        <h1 id="set-title"></h1>
        <p id="set-desc"></p>
        <div id="images-grid" class="grid"></div>
      </div>
    </main>

    <footer>
      &copy; 2025 aibarf. All images synthetic. All minds welcome.
      <a href="https://z532.ai" class="z532">A Z532 product.</a>
    </footer>

    <script>
      const API = "https://aibarf-auth.coryzuber.workers.dev";
      const params = new URLSearchParams(location.search);
      const setId = params.get("id");
      const status = document.getElementById("status");
      const view = document.getElementById("set-view");
      const titleEl = document.getElementById("set-title");
      const descEl = document.getElementById("set-desc");
      const grid = document.getElementById("images-grid");

      if (!setId) status.textContent = "No set ID provided.";
      else
        fetch(`${API}/set?id=${encodeURIComponent(setId)}`)
          .then((res) =>
            res.ok ? res.json() : Promise.reject("Set not found")
          )
          .then((data) => {
            status.style.display = "none";
            view.style.display = "block";
            titleEl.textContent = data.title;
            descEl.textContent = data.description;
            data.images.forEach((fileName) => {
              const img = document.createElement("img");
              img.src = `${API}/images/sets/${setId}/${fileName}`;
              grid.appendChild(img);
            });
          })
          .catch((err) => (status.textContent = err));

      function adjustCols(delta) {
        const root = document.documentElement;
        let cols = parseInt(
          getComputedStyle(root).getPropertyValue("--columns"),
          10
        );
        cols = Math.max(1, cols + delta);
        root.style.setProperty("--columns", cols);
      }

      document.getElementById("decrease-btn").onclick = () => adjustCols(1);
      document.getElementById("increase-btn").onclick = () => adjustCols(-1);
    </script>
  </body>
</html>
